@layer components {
  .drawer {
    @apply relative;
    @apply grid w-full h-full;
  }

  /* magic hidden input :) */
  .drawer>input {
    @apply hidden;
  }

  /* content */
  .drawer>input~main {
    @apply row-start-1 col-start-1;
    @apply overflow-x-hidden overflow-y-auto;
    @apply transition-transform duration-200;
    @apply z-0;
  }

  /* content (open) */
  .drawer-scale>input:checked~main {
    @apply scale-95;
  }

  /* sidebar */
  .drawer>input~aside {
    @apply row-start-1 col-start-1;
    @apply grid max-h-screen;
    /* @apply overflow-x-hidden; */
    @apply overflow-visible;
  }

  .drawer>input~aside::-webkit-scrollbar {
    @apply w-0;
  }

  /* sidebar (open) */
  .drawer>input:checked~aside {
    @apply overflow-y-auto;
  }

  /* overlay */
  .drawer>input~aside>label {
    @apply row-start-1 col-start-1;
    @apply transition-all duration-200 ease-in-out;
    @apply opacity-0 invisible cursor-pointer;
    @apply bg-fore;
  }

  /* overlay (open) */
  .drawer>input:checked~aside>label {
    @apply visible opacity-10;
  }

  /* sidebar content */
  .drawer>input~aside>label+* {
    @apply row-start-1 col-start-1;
    @apply transition-all duration-200;
    @apply bg-back z-40;
  }

  /* ==== variables ==== */

  /* left drawer */

  .drawer-l>input~aside>label+* {
    @apply -translate-x-full;
  }

  .drawer-l>input:checked~aside>label+* {
    @apply translate-x-0;
  }

  /* right drawer */

  .drawer-r>input~aside>label+* {
    @apply translate-x-full justify-self-end;
  }

  .drawer-r>input:checked~aside>label+* {
    @apply translate-x-0;
  }

  /* top drawer */

  .drawer-t>input~aside>label+* {
    @apply -translate-y-full;
  }

  .drawer-t>input:checked~aside>label+* {
    @apply translate-y-0;
  }

  /* bottom drawer */
  
  .drawer-b>input~aside {
    @apply grid-rows-1 overflow-y-hidden;
  }

  .drawer-b>input~aside>label+* {
    @apply translate-y-full row-start-2;
  }

  .drawer-b>input:checked~aside>label+* {
    @apply -translate-y-0;
  }


  /* x only */

  .drawer-x-only>input~aside>label+* {
    @apply translate-y-0 row-start-1;
  }

  .drawer-x-only>input:checked~aside>label+* {
    @apply translate-y-0;
  }

  /* smart drawer */
  @media (min-width: 640px) {
    .drawer-l.drawer-s {
      grid-auto-columns: max-content auto;
    }

    .drawer-r.drawer-s {
      grid-auto-columns: auto max-content;
    }

    .drawer-l.drawer-s>input~main,
    .drawer-r.drawer-s>input~aside {
      @apply col-start-2;
    }

    .drawer-l.drawer-s>input~aside>label+*,
    .drawer-r.drawer-s>input~aside>label+* {
      @apply translate-x-0;
    }

    .drawer-scale.drawer-l.drawer-s>input:checked~main,
    .drawer-scale.drawer-r.drawer-s>input:checked~main,
    .drawer-scale.drawer-t.drawer-s>input:checked~main,
    .drawer-scale.drawer-b.drawer-s>input:checked~main {
      @apply scale-100;
    }
  }
}